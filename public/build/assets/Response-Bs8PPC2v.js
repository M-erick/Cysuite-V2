import{_ as A,n as L,Q as B,r as p,q as u,g as T,i as M,j as U,A as V,o as a,a as e,c as i,b as y,s as v,t as o,l as h,F as w,u as b,h as z,w as E,v as F,e as N,p as Q,f as $}from"./app-CLLxmRhu.js";const f=n=>(Q("data-v-67f32318"),n=n(),$(),n),q={class:"container mx-auto shadow-lg rounded-lg h-screen"},G={class:"flex flex-row justify-between bg-white h-full"},H={class:"flex flex-col w-2/5 border-r-2 overflow-y-auto"},J=f(()=>e("div",{class:"border-b-2 py-4 px-2",style:{"background-color":"#AD9551"}},[e("span",{class:"text-white text-2xl",style:{"font-family":"'Roboto Serif', serif","font-style":"normal","font-weight":"400"}},"Issues")],-1)),K=["onClick"],O=f(()=>e("div",{class:"w-1/4 mr-2"},[e("div",{class:"h-12 md:h-16 w-12 md:w-16 rounded-full border-2 border-gray-300 flex items-center justify-center"},[e("i",{class:"fa-solid fa-user text-2xl md:text-4xl"})])],-1)),P={class:"w-full"},W={class:"text-lg font-semibold",style:{"font-family":"'Roboto Serif', serif","font-style":"normal","font-weight":"500"}},X={class:"text-gray-800"},Y={class:"font-bold",style:{color:"#AD9551"}},Z={class:"text-semibold",style:{"text-align":"right","margin-top":"0.5rem",color:"#AD9551"}},ee={style:{"text-align":"right","font-size":"0.75rem","margin-top":"0.5rem",color:"#6b7280"}},se={class:"w-full px-5 flex flex-col justify-between"},te={key:0,class:"flex flex-col mt-5"},oe={class:"font-semibold"},le={class:"relative mr-2 py-3 px-4 bg-green-900 rounded-bl-3xl rounded-tl-3xl rounded-tr-xl text-white"},ae={class:"absolute bottom-0 left-0 text-xs text-gray-400 transform translate-y-full"},ie={key:1,class:"flex justify-center items-center h-full"},ne=f(()=>e("p",{class:"text-gray-500"},"Select an issue to view details",-1)),re=[ne],ce={class:"py-5"},de=f(()=>e("button",{type:"submit",class:"text-white py-2 px-4 rounded mt-3"},"Submit",-1)),ue={__name:"Response",setup(n){const l=L(),{props:g}=B(),_=g.auth.user,I=p(""),m=p(null),r=p(""),S=u(()=>l.state.issues.issues),c=u(()=>l.state.issues.selectedIssue),k=u(()=>l.state.issues.responses);T(()=>{l.dispatch("issues/fetchIssues")});const R=u(()=>S.value.filter(t=>t.description.toLowerCase().includes(I.value.toLowerCase()))),j=async t=>{l.commit("issues/setSelectedIssue",t),m.value=t.id,await l.dispatch("issues/fetchIssueResponses",t.id)},x=t=>{const d=new Date(t),s={hour:"numeric",minute:"numeric",day:"numeric",month:"long",year:"numeric"};return d.toLocaleString(void 0,s)},D=t=>t.id===m.value,C=async()=>{try{await N.post(`/api/issues/${c.value.id}/responses`,{response_text:r.value,user_id:_.id,issue_id:c.value.id}),r.value="",await l.dispatch("issues/fetchIssueResponses",c.value.id)}catch(t){console.error("Error submitting response:",t)}};return(t,d)=>(a(),M(V,null,{default:U(()=>[e("div",q,[e("div",G,[e("div",H,[J,(a(!0),i(w,null,y(R.value,s=>(a(),i("div",{key:s.id,class:v(["flex flex-row py-4 px-2 items-center border-b-2 cursor-pointer",{"selected-issue":D(s)}]),onClick:fe=>j(s)},[O,e("div",P,[e("div",W,o(s.title),1),e("span",X,[e("span",Y,o(s.user.name)+":",1),h(o(s.description),1)]),e("div",Z,o(s.status),1),e("div",ee,o(x(s.created_at)),1)])],10,K))),128))]),e("div",se,[c.value?(a(),i("div",te,[(a(!0),i(w,null,y(k.value,s=>(a(),i("div",{key:s.id,class:v([{"justify-end":s.user_id===b(_).id,"justify-start":s.user_id!==b(_).id},"flex mb-4"])},[e("span",null,[h("@UserID::"),e("span",oe,o(s.user_id),1)]),e("div",le,[h(o(s.response_text)+" ",1),e("span",ae,o(x(s.created_at)),1)])],2))),128))])):(a(),i("div",ie,re)),e("div",ce,[e("form",{onSubmit:z(C,["prevent"])},[E(e("input",{"onUpdate:modelValue":d[0]||(d[0]=s=>r.value=s),class:"w-full bg-white py-5 px-3 rounded-xl",type:"text",placeholder:"Type your message here..."},null,512),[[F,r.value]]),de],32)])])])])]),_:1}))}},pe=A(ue,[["__scopeId","data-v-67f32318"]]);export{pe as default};
